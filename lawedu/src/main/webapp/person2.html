<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>教师个人主页</title>
    <link rel="stylesheet" type="text/css" href="resources/css/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="resources/css/headerfoot.css"/>
    <link rel="stylesheet" type="text/css" href="resources/css/jquery.dataTables.min.css"/>
    <link rel="stylesheet" type="text/css" href="resources/sweetalert/sweetalert.css"/>
    <style type="text/css">
        .panel{
            width:1200px;
            margin: 0 auto;
            min-width: 1200px;
        }
        #infospan span{
            display: inline-block;
            width:150px;
            margin-top: 10px;
            text-align:center;
        }
        #infospan button{
            display: inline-block;
            width:150px;
            margin-left: 40%;
            margin-top:20px;
        }
    </style>

</head>
<body>
<div id="header">
    <div id="nav_top">
        <img src="resources/img/logo.png" />
        <div id="nav_top_content">
            <a href="home.html">首页</a>
            <a href="courseCategory.html">课程学习</a>
            <a href="test.html">考试模块</a>
            <a href="teacher.html">知名教师</a>
            <a href="publish.html">科研发表</a>
            <a href="message.html">留言提问</a>
        </div>
        <div id="nav_top_btnss">
            <button type="button" class="btn btn-default" id="register" onclick="window.location.href='login.html'">登录注册</button>
        </div>
        <div id="logafter1" style="display: none;vertical-align: top;margin-left: 10px;font-size:16px;margin-top: 18px;color: blue;border:1px solid lightblue;padding: 6px 8px"><a href="person1.html"></a></div>
        <div id="logafter2" style="display: none;vertical-align: top;margin-left: 10px;font-size:16px;margin-top: 18px;color: blue;border:1px solid lightblue;padding: 6px 8px"><a href="person2.html"></a></div>
        <div id="logout" style="display: none;vertical-align: top;margin-left: 10px;font-size:16px;margin-top: 18px;color: blue;border:1px solid lightblue;padding: 6px 8px">退出登录</div>
    </div>
</div>
<div style="margin-top: 110px"></div>
<div class="" style="width: 1200px;margin: 0 auto;min-width:1200px;">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">视频课程管理</h3>
        </div>
        <div class="container-fluid">


            <div class="row">
                <div class="" style="margin-top: 20px"></div>
                <div class="col-md-1">
                    <button class="btn btn-primary" onclick="getCourseVideoList()">刷新</button>
                </div>
                <div class="col-md-1">
                    <button class="btn btn-primary" onclick="addCourseVideo()">添加视频课程</button>
                </div>
            </div>
        </div>
        <div class="panel-body">
            <table id="table_course" class="display">
                <thead>
                <tr>
                    <th>编号</th>
                    <th>名称</th>
                    <th>教师</th>
                    <th>视频url</th>
                    <th>课程分类</th>
                    <th>描述</th>
                    <th>添加时间</th>
                    <th>作业任务</th>
                    <th>图片url</th>
                    <th>操作</th>
                </tr>
                </thead>
            </table>
        </div>
    </div>
</div>
<!-- 修改视频模态框 -->
<div class="modal fade" id="courseUpdateBox" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"
                        aria-hidden="true">×</button><h4 class="modal-title" id="myModalLabel">修改</h4>
            </div>
            <div style="width: 90%;margin: 10px auto;">
                <form class="form-horizontal" id="courseVideoCheckForm">
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程id</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="id" id="id" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程名称</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="name" id="name" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">教师姓名</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="teacherName" id="teacherName" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">视频url</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="videoUrl" id="videoUrl" >
                            </input>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程分类</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="categoryId" id="categoryId" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程描述</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="description" id="description" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">添加时间</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="addTime" id="addTime" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">作业任务</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="assignmentTask" id="assignmentTask" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">图片url</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="url" id="url" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">图片</label>
                        <div class="col-sm-8">
                            <img  src="" name="urlPic" id="urlPic" >
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="submitCourseUpdateBox()">修改</button>
            </div>
        </div>
    </div>
</div>



<!-- 添加视频课程模态框 -->
<div class="modal fade" id="courseAddBox" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"
                        aria-hidden="true">×</button><h4 class="modal-title" id="myModalLabel">添加</h4>
            </div>
            <div style="width: 90%;margin: 10px auto;">
                <form class="form-horizontal" id="courseVideoCheckForm">
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程名称</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="add_name" id="add_name" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">教师id</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="add_teacherId" id="add_teacherId" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">视频url</label>
                        <div class="col-sm-8">
                            <input  type="text" class="DataInput form-control" name="add_videoUrl" id="add_videoUrl" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程分类</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="add_categoryId" id="add_categoryId" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">课程描述</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="add_description" id="add_description" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">作业任务</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="add_assignmentTask" id="add_assignmentTask" >
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-4 control-label">图片url</label>
                        <div class="col-sm-8">
                            <input type="text" class="DataInput form-control" name="add_url" id="add_url" >
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" onclick="submitCourseAddBox()">添加</button>
            </div>
        </div>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">个人信息管理</h3>
    </div>
    <div class="panel-body" id="infospan">
        <span>id    </span><input id="ids" type="text" disabled>
        <span>手机号 </span><input id="mobiles" type="text" disabled>
        <span>用户名 </span><input id="userNames" type="text"><br>
        <span>身份证 </span><input id="idCards" type="text" disabled>
        <span>生日   </span><input type="text" id="births" onclick="laydate()">
        <span>性别   </span><input id="genders" type="text" placeholder="男 或 女 或保密"><br>
        <span>级别   </span><input id="teachLevels" type="text" placeholder="讲师 或 教授 或副教授">
        <span>添加时间</span><input id="addTimes" type="text" disabled><br>
        <button type="button" class="btn btn-info" id="subTeacher">提交修改</button>
    </div>
</div>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">著作列表</h3>
    </div>
    <div class="panel-body">
        <table id="table_article" class="display">
            <thead>
            <tr>
                <th>编号</th>
                <th>名称</th>
                <th>添加人编号</th>
                <th>添加人姓名</th>
                <th>添加时间</th>
                <th>描述</th>
            </tr>
            </thead>
        </table>
    </div>
</div>
<script src="resources/js/jquery-2.1.0.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/js/jquery.dataTables.min.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/js/url.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/layer/layer.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/laydate/laydate.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/js/logs.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/sweetalert/sweetalert.min.js" type="text/javascript" charset="utf-8"></script>
<script src="resources/js/person2.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    /**
     * 打开添加框
     */
    function addCourseVideo() {
        $("#add_name").val("");
        $("#add_teacherId").val("");
        $("#add_videoUrl").val("");
        $("#add_categoryId").val("");
        $("#add_description").val("");
        $("#add_assignmentTask").val("");
        $("#add_url").val("");
        $('#courseAddBox').modal({});
    }

    /**
     * 提交添加数据
     */
    function submitCourseAddBox() {
        var data ={
            "name":$("#add_name").val(),
            "teacherId":$("#add_teacherId").val(),
            "videoUrl":$("#add_videoUrl").val(),
            "categoryId":$("#add_categoryId").val(),
            "description":$("#add_description").val(),
            "assignmentTask":$("#add_assignmentTask").val(),
            "url":$("#add_url").val()
        };
        console.log(data);
        $.ajax({
            type : "POST",
            url : "addCourseVideo",
            dataType : "text",
            data : data,
            success : function(data) {
                swal("提示", "添加成功", "success");
                $('#courseAddBox').modal('hide');
                window.location.reload();
            },
            error : function(e) {
                swal("提示", "网络错误");
            }
        });
    }
</script>

<script type="text/javascript">
    /**
     * 打开修改框
     */

    function courseUpdateBox(id) {
        $.ajax({
            type : "POST",
            url : lawedu + "user/getCourseVideoInfo",
            dataType : "json",
            data : {
                "courseVideoId" : id
            },
            success : function(data) {
                $("#id").attr("value",data.id);
                $("#name").attr("value",data.name);
//                $("#content").attr("value",data.content);
                $("#teacherName").attr("value",data.teacherName);
                $("#videoUrl").attr("value",data.videoUrl);
                $("#categoryId").attr("value",data.categoryId);
                $("#description").attr("value",data.description);
                $("#addTime").attr("value", data.addTime);
                $("#assignmentTask").attr("value", data.assignmentTask);
                $("#url").attr("value",data.url);
                $("#urlPic").attr("src", "../"+data.url);
            },error : function (e) {
                swal("提示","网络错误");
            }
        });
        $('#courseUpdateBox').modal({});
    }

    /**
     * 提交修改数据
     */
    function submitCourseUpdateBox() {
        var data = {
            "id":$("#id").val(),
            "name":$("#name").val(),
            "videoUrl":$("#videoUrl").val(),
            "categoryId":$("#categoryId").val(),
            "description":$("#description").val(),
            "addTime":$("#addTime").val(),
            "url":$("#url").val(),
            "assignmentTask":$("#assignmentTask").val()
        };
        //console.log(data);
        $.ajax({
            type : "POST",
            url : "manager/updateCourseVideo",
            dataType : "text",
            data : data,
            success : function(data) {
                swal("提示", "修改成功", "success");
                $('#userUpdateBox').modal('hide');
                getCourseVideoList();
            },
            error : function(e) {
                swal("提示", "网络错误");
            }
        });
    }
    //获取文章列表
    getArticleList();
    function getArticleList () {
        $.ajax({
            type : "POST",
            url : lawedu + "user/getArticleList",
            dataType : "json",
            data : {},
            success : function(data) {
                $('#table_article').DataTable({
                    data : data.list,
                    destroy : true,
                    "columns" : [ {
                        data : "id"
                    }, {
                        data : "name"
                    }, {
                        data : "addUser"
                    }, {
                        data : "userName"
                    }, {
                        data : "addTime"
                    }, {
                        data : "description"
                    } ],
                    "columnDefs": [
                        {
                            "render" : function(data, type, row, meta){
                                if(typeof data == "undefined") {
                                    return ''
                                }
                                return data;
                            },
                            "targets" : [0,1,2,3,4,5]
                        }
                    ],
                    language : {
                        "processing" : "处理中...",
                        "lengthMenu" : "显示 _MENU_ 项结果",
                        "zeroRecords" : "没有匹配结果",
                        "info" : "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                        "infoEmpty" : "显示第 0 至 0 项结果，共 0 项",
                        "infoFiltered" : "(由 _MAX_ 项结果过滤)",
                        "infoPostFix" : "",
                        "search" : "搜索:",
                        "url" : "",
                        "emptyTable" : "没有数据",
                        "loadingRecords" : "载入中...",
                        "infoThousands" : "20",
                        "paginate" : {
                            "first" : "首页",
                            "previous" : "上页",
                            "next" : "下页",
                            "last" : "末页"
                        }
                    }
                });
            },error : function () {
                swal("提示","网络错误");
            }
        });
    }
</script>

<script type="text/javascript">
    function courseDeleteBox (id) {
        swal({
                title: "确认删除?",
                text: "您将删除此用户。",
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: "删除",
                closeOnConfirm: false
            },
            function () {
                $.ajax({
                    type: "POST",
                    url: "manager/courseDelete",
                    dataType: "text",
                    data: {
                        "type" : "video",
                        "id" : id
                    },
                    success: function (data) {
                        swal("提示","删除成功","success");
                        getCourseVideoList();
                    },error: function (e) {
                        swal("提示","网络错误");
                    }
                });
            }
        )
    }
</script>
</body>
</html>